<html>
  <head>
      <meta charset="UTF-8">
      <title>Circle Progress</title>
  </head>
  <body>
  <canvas id="bg" width="200" height="200"></canvas>
  <script>
    var bg = document.getElementById('bg');
    var ctx = bg.getContext('2d');
    var circ = Math.PI * 2;
    var quart = Math.PI / 2;
    var imd = null;

    ctx.beginPath();
    ctx.strokeStyle = '#99CC33';
    ctx.lineCap = 'square';
    ctx.closePath();
    ctx.fill();
    ctx.lineWidth = 20.0;

    imd = ctx.getImageData(0, 0, 240, 240);
    function draw(current){
      // ctx.putImageData(imd, 0, 0);
      ctx.beginPath();
      ctx.arc(120, 120, 70, -(quart), ((circ) * current) - quart, false);
      ctx.stroke();
    }
    draw(1);
    ctx.strokeStyle = '#555';
    var t=0;
    var timer=null;
    function loadCanvas(now){
      timer = setInterval(function(){
        if(t>now){
          clearInterval(timer);
        }else{
          draw(t);
          t+=0.01;
        }
      },20);
    }

    loadCanvas(0.8);
    timer=null;
  </script>
  </body>
</html>